"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = {
    FIRST_KEY_INDEX: 1,
    IS_READ_ONLY: false,
    transformArguments(destination, source) {
        let args = ['CMS.MERGE', destination, source.length.toString()];
        if (isPlainSketches(source)) {
            args = args.concat(source);
        }
        else {
            const { length } = args;
            args[length + source.length] = 'WEIGHTS';
            for (let i = 0; i < source.length; i++) {
                args[length + i] = source[i].name;
                args[length + source.length + i + 1] = source[i].weight.toString();
            }
        }
        return args;
    },
    transformReply: undefined
};
function isPlainSketches(src) {
    return typeof src[0] === 'string' || src[0] instanceof Buffer;
}
